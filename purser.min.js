!function(e){"use strict";var t=["utm_source","utm_medium","utm_name","utm_term","utm_campaign","utm_content"],r=e.purser||e.Purser||{fetch:function(){return JSON.parse(e.localStorage.getItem("purser_visitor"))},destroy:function(){return e.localStorage.removeItem("purser_visitor")},convert:function(t){var r=this.update(t);return r.converted_at=(new Date).toISOString(),r.conversion_page=e.location.origin+e.location.pathname,r.visits_at_conversion=(r.visits||[]).length,r.pageviews_before_conversion=r.pageviews||0,e.localStorage.setItem("purser_visitor",JSON.stringify(r)),r},update:function(t){var r=this.fetch();for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return e.localStorage.setItem("purser_visitor",JSON.stringify(r)),r},createInstance:function(){for(var r={first_website_visit:(new Date).toISOString(),referrer:document.referrer.length?document.referrer:"direct",browser_timezone:(new Date).getTimezoneOffset(),browser_language:e.navigator.language,landing_page:e.location.origin+e.location.pathname,screen_height:e.screen.height,screen_width:e.screen.width},i=0;i<t.length;i++){var n=t[i];n=n.replace(/[\[\]]/g,"\\$&");var s=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(e.location.href);s&&s[2]&&(r[n]=decodeURIComponent(s[2].replace(/\+/g," ")))}return r},create:function(){var t=this.createInstance();return t.last_visit=parseInt((new Date).getTime()/1e3),t.pageviews=1,e.localStorage.setItem("purser_visitor",JSON.stringify(t)),t},visits:{recently:function(){var e=r.fetch();return!!e.last_visit&&(parseInt((new Date).getTime()/1e3)-e.last_visit)/3600<.5},create:function(){var e=r.fetch();e.visits=e.visits||[];var t=r.createInstance();return t.id=(65536*(1+Math.random())|0).toString(16).substring(1),e.visits.push(t),e.last_visit=parseInt((new Date).getTime()/1e3),r.update(e),e},fetch:function(e){var t=r.fetch(),i=t.visits.filter(function(t){return t.id===e})[0];return i.index=t.visits.map(function(e){return e.id}).indexOf(e),i},update:function(e,t){var i=r.visits.fetch(e),n=r.fetch();for(var s in t)t.hasOwnProperty(s)&&(i[s]=t[s]);return n.visits[i.index]=i,r.update(n)},delete:function(e){var t=r.fetch(),i=r.visits.fetch(e);return t.visits=t.visits.splice(i.index,1),r.update(t)},all:function(){return r.fetch().visits||[]}},pageviews:{add:function(){var e=r.fetch();return e.pageviews=e.pageviews+1||1,r.update(e)}}};r.fetch()?(r.visits.recently()||r.visits.create(),r.pageviews.add()):r.create(),e.purser=r}(window);
